<?php

use yii\helpers\Html;
use yii\helpers\Url;
use backend\widgets\common\LinkPages;

$this->title = '角色&权限列表';
$this->params['breadcrumbs'][] = $this-> title;

$this->registerJsFile('/statics/js/table_base.js',[ 'depends'=> 'backend\assets\AppAsset']);
?>

<div class="wrapper wrapper-content animated fadeInRight">

<div class="ibox-content">
    <div class="row">
        <div class="col-sm-1 m-b-xs">
            <?=Html::a("创建 <i class='icon-plus'></i>" , ['create' ], ['class' => 'btn btn-sm btn-primary'])?>
        </div>
        <!--<div class="col-sm-3 m-b-xs">
            <select class="input-sm form-control input-s-sm inline">
                <option value="0">请选择</option>
                <option value="1">选项1</option>
                <option value="2">选项2</option>
                <option value="3">选项3</option>
            </select>
        </div>-->
        <div class="col-sm-3">
            <div class="input-group">
                <input type="text" placeholder="请输入关键词" class="input-sm form-control"> <span class="input-group-btn">
                                        <button type="button" class="btn btn-sm btn-primary"> 搜索</button> </span>
            </div>
        </div>
    </div>
    <hr>
    <div class="table-responsive">


    <table class ="table table-striped">
        <thead >
        <tr >
            <!--                 <th> -->
            <!--                     <div class="checker"><span><input type="checkbox" value="1" name="select_all" class="select-on-check-all"></span></div> -->
            <!--                 </th> -->
            <th >ID</th >
            <th >名称 </th >
            <th >类型 </th >
            <th >描述 </th >
            <th >创建时间 </th >
            <th >操作 </th >
        </tr >
        </thead >
        <tbody >
        <?php if ( empty($data[ 'data'])): ?>
            <tr ><td colspan ="20"><?=Yii::t('common' ,'Not find data') ?> </td ></tr >
        <?php else: ?>
            <?php $i = $data['start'];?>
            <?php foreach ( $data['data'] as $list):?>
                <tr data-key =" <?=$list[ 'name'] ?>" >
                    <!--                 <td> -->
                    <!--                     <div class="checker"><span><input type="checkbox" value="158" name="select"></span></div> -->
                    <!--                 </td> -->
                    <td ><?= $i++?> </td >
                    <td ><?= Html::encode($list[ 'name']) ?></ td>
                    <td ><?= Html::encode(($list[ 'type']==1)? '角色': '权限') ?></ td>
                    <td ><?= Html::encode($list[ 'description']) ?></ td>
                    <td> <?=Html:: encode($list['created_at']?date('Y-m-d',$list['created_at']):'未设置') ?></ td>
                    <td >
                        <a href= "<?= Url::to([ 'update', 'id'=>$list[ 'name']]); ?>" >编辑 </a >
                        <a class ="del" href= "javascript:;">删除</a >
                    </td >
                </tr >
            <?php endforeach; ?>
        <?php endif; ?>
        </tbody >
    </table >
        <?=Yii::t('common' , '{start}-{end} a total of {total}',['start' => $data[ 'start'], 'end'=> $data['end'],'total'=> $data['count' ]])?> </div >
    <?=LinkPages:: widget(['pagination' => $pages]);?>
    <input type ="hidden" name="delUrl" value= "<?= Url::to([ 'delete']) ?>" >
</div>
</div >